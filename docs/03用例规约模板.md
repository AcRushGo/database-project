 

## 1.  用例名称：用户实现商品购买

#### 1.1  简要说明

作用：描述用户购买的基本事件流

目的：呈现出用户购买商品的逻辑，方便代码构建时和其他实体类产生关联



## 2.  事件流

#### 2.1  基本流

用户浏览商店提供的商品页面，在挑选完自己合适的商品后，将商品加入购物车，同时生成商品支付订单，用户确认后，实现购买。购买完成后，用户可以通过订单查询所购买商品基本信息，该ID所属的商品实例被删除，该商品种类总数量减少。



#### 2.2  备选流

##### 2.2.1 *<第一备选流>*

用户将商品加入了购物车，但是没有下订单。

此时购物车中将保存记录，每个用户有其对应的购物车记录。

##### 2.2.2  *<备选分支流>*

用户将商品加入了购物车，但是没有下订单，隔了很久又下了订单。

转入基本事件流。

##### 2.2.3  *<第二备选流>*

用户下了订单，但是没有付款。

此时订单中会记录此订单的状态，设为提交订单但是未付款。



## 3.  特殊需求

#### 3.1  <第一特殊需求>

可用性：商品图片被展示出来，方便用户浏览选择

可靠性：商品实现购买后，商品的实例和数量需要在数据库中变化并保存

性能：多个用户实现购买的时候不会出现订单信息错误

支持性：支持二维码付款



## 4.  前置条件

#### 4.1  <前置条件一>

1. 用户已经实现该商城系统的用户注册，并成功登录

2. 个人用户中余额足够

3. 所选购商品仍有存货，数量大于0

 

## 5.  后置条件

#### 5.1  <后置条件一>

1. 新的订单生成，保存了用户和商品的基本信息

2. 付款后订单状态改为未发货

3. 该商品所属的商品种类的总数量减少



## 6.  扩展点

vip用户

#### 6.1 <扩展点名称>

vip用户实现商品购买



## 7.  活动图

![[https://github.com/AcRushGo/database-project/blob/master/docs/images/03%E6%B4%BB%E5%8A%A8%E5%9B%BE.jpg](https://github.com/AcRushGo/database-project/blob/master/docs/images/03活动图.jpg)]()